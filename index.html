<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Teste upload</title>
    <link href="bootstrap/bootstrap-3.3.7/css/bootstrap.min.css" media="all" rel="stylesheet" type="text/css" />
    <link href="bootstrap-fileinput/css/fileinput.css" media="all" rel="stylesheet" type="text/css" />
    <link href="bootstrap-fileinput/css/fileinput.min.css" media="all" rel="stylesheet" type="text/css" />
    <link href="bootstrap-fileinput/themes/explorer/theme.css" media="all" rel="stylesheet" type="text/css" />
    <script src="jquery/jquery-3.1.1.min.js" type="text/javascript"></script>
    <script src="bootstrap/bootstrap-3.3.7/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="bootstrap-fileinput/js/fileinput.min.js" type="text/javascript"></script>
    <script src="bootstrap-fileinput/themes/fa/theme.js" type="text/javascript"></script>
    <script src="bootstrap-fileinput/js/plugins/canvas-to-blob.min.js" type="text/javascript"></script>
    <script src="bootstrap-fileinput/js/plugins/purify.min.js" type="text/javascript"></script>
    <script src="bootstrap-fileinput/js/plugins/sortable.min.js" type="text/javascript"></script>
    <script src="bootstrap-fileinput/js/locales/pt-BR.js" type="text/javascript"></script>
</head>
<body>
<div class="container kv-main">
    <h4>Faz upload</h4>
    <form enctype="multipart/form-data">
        <label>Upload de arquivo</label>
        <input id="arquivo" name="arquivo" type="file" multiple>
    </form>
</div>
</body>
<script>
    //Inicializa o input file
    $('#arquivo').fileinput({
        language: 'pt-BR',
        uploadUrl: 'upload/upload_arquivo.php',
        uploadAsync:true
    });

    //Ação do input ao completar o upload, o arquivo de upload terá que retonar json
    $('#arquivo').on('fileuploaded', function(event, data, previewId, index) {
        var form = data.form;
        var files = data.files;
        var extra = data.extra;
        var response = data.response;
        var reader = data.reader;
        console.log(response);
    });

    //Quando o upload dar erro
    $('#arquivo').on('fileuploaderror', function(event, data, msg) {
        var form = data.form;
        var files = data.files;
        var extra = data.extra;
        var response = data.response;
        var reader = data.reader;

        // get message
        alert("erro no upload");
    });


    //Coloca os botões de enviar e remover como verde e vermelho respectivamente.
    $('.fileinput-remove-button').removeClass('btn-default').addClass('btn-danger');
    $('.fileinput-upload-button').removeClass('btn-default').addClass('btn-success');
</script>
</html>